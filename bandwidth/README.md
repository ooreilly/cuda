# Bandwidth 
A program that computes the number of bytes in flight needed to saturate a SM. Each thread loads 16
bytes at a time using 128 bit wide load instructions. The kernel is read-only and passes through the
input array using Mark Harris' [grid-stride loop pattern](https://developer.nvidia.com/blog/cuda-pro-tip-write-flexible-kernels-grid-stride-loops/). The launch
configuration uses as many blocks as possible that fits on each SM (one wave per SM).  The program adjusts absolute
occupancy (the number of active warps per SM) by allocating a variable amount of shared memory.

## Example
Output sorted by bandwidth (column 6)
```
./bandwidth.x | sort -n -k 6
Block size 	 Shared memory 	 Warps per SM 	 Cache lines per SM 	 Bytes in flight per SM 	 Bandwidth (GB/s)
        32 	         49152 	            1 	           4.000000 	             512.000000 	        94.162720 
        32 	         32768 	            2 	           8.000000 	            1024.000000 	       185.382156 
        64 	         65536 	            2 	           8.000000 	            1024.000000 	       235.054016 
        32 	         21760 	            3 	          12.000000 	            1536.000000 	       272.860809 
        96 	         65536 	            3 	          12.000000 	            1536.000000 	       340.330566 
        32 	         16384 	            4 	          16.000000 	            2048.000000 	       355.956085 
        64 	         32768 	            4 	          16.000000 	            2048.000000 	       426.224915 
        32 	         13056 	            5 	          20.000000 	            2560.000000 	       427.580841 
        32 	         10752 	            6 	          24.000000 	            3072.000000 	       488.876770 
        32 	          9216 	            7 	          28.000000 	            3584.000000 	       523.531555 
        64 	         21760 	            6 	          24.000000 	            3072.000000 	       524.228210 
        96 	         32768 	            6 	          24.000000 	            3072.000000 	       530.760559 
        32 	          8192 	            8 	          32.000000 	            4096.000000 	       547.237732 
        32 	          7168 	            9 	          36.000000 	            4608.000000 	       555.435242 
        64 	         16384 	            8 	          32.000000 	            4096.000000 	       560.590332 
        64 	         13056 	           10 	          40.000000 	            5120.000000 	       565.747742 
        96 	         21760 	            9 	          36.000000 	            4608.000000 	       567.630249 
        32 	          5888 	           11 	          44.000000 	            5632.000000 	       573.432434 
        32 	          6400 	           10 	          40.000000 	            5120.000000 	       574.053406 
        32 	          4864 	           13 	          52.000000 	            6656.000000 	       574.624695 
        64 	          9216 	           14 	          56.000000 	            7168.000000 	       575.945190 
        64 	         10752 	           12 	          48.000000 	            6144.000000 	       576.741821 
        96 	         16384 	           12 	          48.000000 	            6144.000000 	       578.320557 
        32 	          4352 	           15 	          60.000000 	            7680.000000 	       580.363464 
        32 	          4608 	           14 	          56.000000 	            7168.000000 	       580.706177 
        32 	          5376 	           12 	          48.000000 	            6144.000000 	       581.188965 
        64 	          6400 	           20 	          80.000000 	           10240.000000 	       581.803101 
        64 	          7168 	           18 	          72.000000 	            9216.000000 	       581.845825 
        64 	          5376 	           24 	          96.000000 	           12288.000000 	       582.033386 
        96 	          6400 	           30 	         120.000000 	           15360.000000 	       582.161743 
        96 	         10752 	           18 	          72.000000 	            9216.000000 	       582.206909 
        64 	          8192 	           16 	          64.000000 	            8192.000000 	       582.606445 
        96 	         13056 	           15 	          60.000000 	            7680.000000 	       582.735046 
        96 	          8192 	           24 	          96.000000 	           12288.000000 	       582.825562 
        64 	          4608 	           28 	         112.000000 	           14336.000000 	       583.080505 
        64 	          4096 	           32 	         128.000000 	           16384.000000 	       583.643738 
        32 	          4096 	           16 	          64.000000 	            8192.000000 	       583.818115 
        96 	          9216 	           21 	          84.000000 	           10752.000000 	       584.298950 
        64 	          5888 	           22 	          88.000000 	           11264.000000 	       584.342041 
        64 	          4352 	           30 	         120.000000 	           15360.000000 	       584.768555 
        64 	          4864 	           26 	         104.000000 	           13312.000000 	       585.392639 
        96 	          7168 	           27 	         108.000000 	           13824.000000 	       586.051819 
```
Results were obtained using a Geforce RTX 2080 Ti.

